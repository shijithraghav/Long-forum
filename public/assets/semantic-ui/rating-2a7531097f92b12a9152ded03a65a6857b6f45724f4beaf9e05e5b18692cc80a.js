/*!
 * # Semantic UI - Rating
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,n,i){"use strict";e.fn.rating=function(t){var n,a=e(this),o=a.selector||"",r=(new Date).getTime(),l=[],s=arguments[0],c="string"==typeof s,d=[].slice.call(arguments,1);return a.each(function(){var u,m=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),p=m.namespace,h=m.className,g=m.metadata,f=m.selector,b=(m.error,"."+p),v="module-"+p,T=this,E=e(this).data(v),y=e(this),C=y.find(f.icon);u={initialize:function(){u.verbose("Initializing rating module",m),0===C.length&&u.setup.layout(),m.interactive?u.enable():u.disable(),u.set.rating(u.get.initialRating()),u.instantiate()},instantiate:function(){u.verbose("Instantiating module",m),E=u,y.data(v,u)},destroy:function(){u.verbose("Destroying previous instance",E),u.remove.events(),y.removeData(v)},refresh:function(){C=y.find(f.icon)},setup:{layout:function(){var t=u.get.maxRating(),n=e.fn.rating.settings.templates.icon(t);u.debug("Generating icon html dynamically"),y.html(n),u.refresh()}},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(h.selected),y.addClass(h.selected),t.addClass(h.selected).prevAll().addClass(h.selected)},mouseleave:function(){y.removeClass(h.selected),C.removeClass(h.selected)},click:function(){var t=e(this),n=u.get.rating(),i=C.index(t)+1,a="auto"==m.clearable?1===C.length:m.clearable;a&&n==i?u.clearRating():u.set.rating(i)}},clearRating:function(){u.debug("Clearing current rating"),u.set.rating(0)},bind:{events:function(){u.verbose("Binding events"),y.on("mouseenter"+b,f.icon,u.event.mouseenter).on("mouseleave"+b,f.icon,u.event.mouseleave).on("click"+b,f.icon,u.event.click)}},remove:{events:function(){u.verbose("Removing events"),y.off(b)}},enable:function(){u.debug("Setting rating to interactive mode"),u.bind.events(),y.removeClass(h.disabled)},disable:function(){u.debug("Setting rating to read-only mode"),u.remove.events(),y.addClass(h.disabled)},get:{initialRating:function(){return y.data(g.rating)!==i?(y.removeData(g.rating),y.data(g.rating)):m.initialRating},maxRating:function(){return y.data(g.maxRating)!==i?(y.removeData(g.maxRating),y.data(g.maxRating)):m.maxRating},rating:function(){var e=C.filter("."+h.active).length;return u.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=e-1>=0?e-1:0,n=C.eq(t);y.removeClass(h.selected),C.removeClass(h.selected).removeClass(h.active),e>0&&(u.verbose("Setting current rating to",e),n.prevAll().andSelf().addClass(h.active)),m.onRate.call(T,e)}},setting:function(t,n){if(u.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,u,t);else{if(n===i)return u[t];u[t]=n}},debug:function(){m.debug&&(m.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,m.name+":"),u.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),u.verbose.apply(console,arguments)))},error:function(){u.error=Function.prototype.bind.call(console.error,console,m.name+":"),u.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;m.performance&&(t=(new Date).getTime(),i=r||t,n=t-i,r=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,500)},display:function(){var t=m.name+":",n=0;r=!1,clearTimeout(u.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,a,o){var r,l,s,c=E;return a=a||d,o=T||o,"string"==typeof t&&c!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,a){var o=n!=r?a+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=r)c=c[o];else{if(c[o]!==i)return l=c[o],!1;if(!e.isPlainObject(c[a])||n==r)return c[a]!==i?(l=c[a],!1):!1;c=c[a]}})),e.isFunction(l)?s=l.apply(o,a):l!==i&&(s=l),e.isArray(n)?n.push(s):n!==i?n=[n,s]:s!==i&&(n=s),l}},c?(E===i&&u.initialize(),u.invoke(s)):(E!==i&&E.invoke("destroy"),u.initialize())}),n!==i?n:this},e.fn.rating.settings={name:"Rating",namespace:"rating",debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,n="";e>=t;)n+='<i class="icon"></i>',t++;return n}}}}(jQuery,window,document);