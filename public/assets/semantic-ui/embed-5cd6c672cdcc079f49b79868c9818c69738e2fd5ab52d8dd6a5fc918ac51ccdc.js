/*!
 * # Semantic UI - Video
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,i,n){"use strict";e.fn.embed=function(i){var a,o=e(this),r=o.selector||"",l=(new Date).getTime(),s=[],c=arguments[0],d="string"==typeof c,u=[].slice.call(arguments,1);return o.each(function(){var m,p=e.isPlainObject(i)?e.extend(!0,{},e.fn.embed.settings,i):e.extend({},e.fn.embed.settings),h=p.selector,g=p.className,f=p.sources,b=p.error,v=p.metadata,T=p.namespace,E=p.templates,y="."+T,C="module-"+T,k=(e(t),e(this)),I=k.find(h.placeholder),D=k.find(h.icon),R=k.find(h.embed),O=this,w=k.data(C);m={initialize:function(){m.debug("Initializing embed"),m.determine.autoplay(),m.create(),m.bind.events(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),w=m,k.data(C,m)},destroy:function(){m.verbose("Destroying previous instance of embed"),m.reset(),k.removeData(C).off(y)},refresh:function(){m.verbose("Refreshing selector cache"),I=k.find(h.placeholder),D=k.find(h.icon),R=k.find(h.embed)},bind:{events:function(){m.has.placeholder()&&(m.debug("Adding placeholder events"),k.on("click"+y,h.placeholder,m.createAndShow).on("click"+y,h.icon,m.createAndShow))}},create:function(){var e=m.get.placeholder();e?m.createPlaceholder():m.createAndShow()},createPlaceholder:function(e){var t=m.get.icon(),i=m.get.url();m.generate.embed(i);e=e||m.get.placeholder(),k.html(E.placeholder(e,t)),m.debug("Creating placeholder for embed",e,t)},createEmbed:function(t){m.refresh(),t=t||m.get.url(),R=e("<div/>").addClass(g.embed).html(m.generate.embed(t)).appendTo(k),p.onCreate.call(O,t),m.debug("Creating embed object",R)},createAndShow:function(){m.createEmbed(),m.show()},change:function(e,t,i){m.debug("Changing video to ",e,t,i),k.data(v.source,e).data(v.id,t).data(v.url,i),m.create()},reset:function(){m.debug("Clearing embed and showing placeholder"),m.remove.active(),m.remove.embed(),m.showPlaceholder(),p.onReset.call(O)},show:function(){m.debug("Showing embed"),m.set.active(),p.onDisplay.call(O)},hide:function(){m.debug("Hiding embed"),m.showPlaceholder()},showPlaceholder:function(){m.debug("Showing placeholder image"),m.remove.active(),p.onPlaceholderDisplay.call(O)},get:{id:function(){return p.id||k.data(v.id)},placeholder:function(){return p.placeholder||k.data(v.placeholder)},icon:function(){return p.icon?p.icon:k.data(v.icon)!==n?k.data(v.icon):m.determine.icon()},source:function(e){return p.source?p.source:k.data(v.source)!==n?k.data(v.source):m.determine.source()},type:function(){var e=m.get.source();return f[e]!==n?f[e].type:!1},url:function(){return p.url?p.url:k.data(v.url)!==n?k.data(v.url):m.determine.url()}},determine:{autoplay:function(){m.should.autoplay()&&(p.autoplay=!0)},source:function(t){var i=!1;return t=t||m.get.url(),t&&e.each(f,function(e,n){return-1!==t.search(n.domain)?(i=e,!1):void 0}),i},icon:function(){var e=m.get.source();return f[e]!==n?f[e].icon:!1},url:function(){var e,t=p.id||k.data(v.id),i=p.source||k.data(v.source);return e=f[i]!==n?f[i].url.replace("{id}",t):!1,e&&k.data(v.url,e),e}},set:{active:function(){k.addClass(g.active)}},remove:{active:function(){k.removeClass(g.active)},embed:function(){R.empty()}},encode:{parameters:function(e){var t,i=[];for(t in e)i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i.join("&amp;")}},generate:{embed:function(e){m.debug("Generating embed html");var t,i,n=m.get.source();return e=m.get.url(e),e?(i=m.generate.parameters(n),t=E.iframe(e,i)):m.error(b.noURL,k),t},parameters:function(t,i){var a=f[t]&&f[t].parameters!==n?f[t].parameters(p):{};return i=i||p.parameters,i&&(a=e.extend({},a,i)),a=p.onEmbed(a),m.encode.parameters(a)}},has:{placeholder:function(){return p.placeholder||k.data(v.placeholder)}},should:{autoplay:function(){return"auto"===p.autoplay?p.placeholder||k.data(v.placeholder)!==n:p.autoplay}},is:{video:function(){return"video"==m.get.type()}},setting:function(t,i){if(m.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(i===n)return p[t];p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(i===n)return m[t];m[t]=i}},debug:function(){p.debug&&(p.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,p.name+":"),m.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,p.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=l||t,i=t-n,l=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=p.name+":",i=0;l=!1,clearTimeout(m.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",r&&(t+=" '"+r+"'"),o.length>1&&(t+=" ("+o.length+")"),(console.group!==n||console.table!==n)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,o){var r,l,s,c=w;return i=i||u,o=O||o,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(i,a){var o=i!=r?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[o])&&i!=r)c=c[o];else{if(c[o]!==n)return l=c[o],!1;if(!e.isPlainObject(c[a])||i==r)return c[a]!==n?(l=c[a],!1):(m.error(b.method,t),!1);c=c[a]}})),e.isFunction(l)?s=l.apply(o,i):l!==n&&(s=l),e.isArray(a)?a.push(s):a!==n?a=[a,s]:s!==n&&(a=s),l}},d?(w===n&&m.initialize(),m.invoke(c)):(w!==n&&w.invoke("destroy"),m.initialize())}),a!==n?a:this},e.fn.embed.settings={name:"Embed",namespace:"embed",debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.colors||n,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.colors||n,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,t){return'<iframe src="'+e+"?"+t+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,t){var i="";return t&&(i+='<i class="'+t+' icon"></i>'),e&&(i+='<img class="placeholder" src="'+e+'">'),i}},api:!0,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,document);