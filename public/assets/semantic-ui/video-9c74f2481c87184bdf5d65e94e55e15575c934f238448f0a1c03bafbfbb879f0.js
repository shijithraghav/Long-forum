/*!
 * # Semantic UI 1.12.3 - Video
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2014 Contributorss
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,n,i){"use strict";e.fn.video=function(n){var a,o=e(this),r=o.selector||"",l=(new Date).getTime(),s=[],c=arguments[0],d="string"==typeof c,u=[].slice.call(arguments,1);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var m,p=e.isPlainObject(n)?e.extend(!0,{},e.fn.video.settings,n):e.extend({},e.fn.video.settings),h=p.selector,g=p.className,f=p.error,b=p.metadata,v=p.namespace,T=p.templates,E="."+v,y="module-"+v,C=(e(t),e(this)),k=C.find(h.placeholder),I=C.find(h.playButton),D=C.find(h.embed),R=this,O=C.data(y);m={initialize:function(){m.debug("Initializing video"),m.create(),k.on("click"+E,m.play),I.on("click"+E,m.play),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),O=m,C.data(y,m)},create:function(){var e=C.data(b.image),t=T.video(e);C.html(t),m.refresh(),e||m.play(),m.debug("Creating html for video element",t)},destroy:function(){m.verbose("Destroying previous instance of video"),m.reset(),C.removeData(y).off(E),k.off(E),I.off(E)},refresh:function(){m.verbose("Refreshing selector cache"),k=C.find(h.placeholder),I=C.find(h.playButton),D=C.find(h.embed)},change:function(e,t,n){m.debug("Changing video to ",e,t,n),C.data(b.source,e).data(b.id,t).data(b.url,n),p.onChange()},reset:function(){m.debug("Clearing video embed and showing placeholder"),C.removeClass(g.active),D.html(" "),k.show(),p.onReset()},play:function(){m.debug("Playing video");var e=C.data(b.source)||!1,t=C.data(b.url)||!1,n=C.data(b.id)||!1;D.html(m.generate.html(e,n,t)),C.addClass(g.active),p.onPlay()},get:{source:function(e){return"string"!=typeof e?!1:-1!==e.search("youtube.com")?"youtube":-1!==e.search("vimeo.com")?"vimeo":!1},id:function(e){return e.match(p.regExp.youtube)?e.match(p.regExp.youtube)[1]:e.match(p.regExp.vimeo)?e.match(p.regExp.vimeo)[2]:!1}},generate:{html:function(e,t,n){m.debug("Generating embed html");var i;return e=e||p.source,t=t||p.id,e&&t||n?(e&&t||(e=m.get.source(n),t=m.get.id(n)),"vimeo"==e?i='<iframe src="//player.vimeo.com/video/'+t+"?="+m.generate.url(e)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':"youtube"==e&&(i='<iframe src="//www.youtube.com/embed/'+t+"?="+m.generate.url(e)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')):m.error(f.noVideo),i},url:function(e){var t=p.api?1:0,n="auto"===p.autoplay?C.data("image")!==i:p.autoplay,a=p.hd?1:0,o=p.showUI?1:0,r=p.showUI?0:1,l="";return"vimeo"==e&&(l="api="+t+"&amp;title="+o+"&amp;byline="+o+"&amp;portrait="+o+"&amp;autoplay="+n,p.color&&(l+="&amp;color="+p.color)),"ustream"==e?(l="autoplay="+n,p.color&&(l+="&amp;color="+p.color)):"youtube"==e&&(l="enablejsapi="+t+"&amp;autoplay="+n+"&amp;autohide="+r+"&amp;hq="+a+"&amp;modestbranding=1",p.color&&(l+="&amp;color="+p.color)),l}},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,p,t);else{if(n===i)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},debug:function(){p.debug&&(p.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,p.name+":"),m.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,p.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;p.performance&&(t=(new Date).getTime(),i=l||t,n=t-i,l=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,100)},display:function(){var t=p.name+":",n=0;l=!1,clearTimeout(m.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),o.length>1&&(t+=" ("+o.length+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,o){var r,l,s,c=O;return n=n||u,o=R||o,"string"==typeof t&&c!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,a){var o=n!=r?a+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(c[o])&&n!=r)c=c[o];else{if(c[o]!==i)return l=c[o],!1;if(!e.isPlainObject(c[a])||n==r)return c[a]!==i?(l=c[a],!1):(m.error(f.method,t),!1);c=c[a]}})),e.isFunction(l)?s=l.apply(o,n):l!==i&&(s=l),e.isArray(a)?a.push(s):a!==i?a=[a,s]:s!==i&&(a=s),l}},d?(O===i&&m.initialize(),m.invoke(c)):(O!==i&&O.invoke("destroy"),m.initialize())}),a!==i?a:this},e.fn.video.settings={name:"Video",namespace:"video",debug:!1,verbose:!0,performance:!0,metadata:{id:"id",image:"image",source:"source",url:"url"},source:!1,url:!1,id:!1,aspectRatio:16/9,onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:"auto",color:"#442359",hd:!0,showUI:!1,api:!0,regExp:{youtube:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,vimeo:/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/},error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}},e.fn.video.settings.templates={video:function(e){var t="";return e&&(t+='<i class="video play icon"></i><img class="placeholder" src="'+e+'">'),t+='<div class="embed"></div>'}}}(jQuery,window,document);